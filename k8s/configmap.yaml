---
apiVersion: v1
kind: ConfigMap
metadata:
  name: nexus-config
  namespace: nexus-functions
  labels:
    app.kubernetes.io/name: nexus-functions
    app.kubernetes.io/component: config
data:
  RUST_LOG: "info"
  NEXUS_HOST: "0.0.0.0"
  NEXUS_PORT: "8080"
  NATS_URL: "nats://nats-service:4222"
  NEXUS_FUNCTIONS_DIR: "/app/functions"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: nats-config
  namespace: nexus-functions
  labels:
    app.kubernetes.io/name: nats
    app.kubernetes.io/component: config
data:
  nats.conf: |
    # NATS Server Configuration
    port: 4222
    http_port: 8222
    
    # JetStream Configuration
    jetstream {
      store_dir: "/data"
      max_memory_store: 1GB
      max_file_store: 10GB
    }
    
    # Clustering (for multi-node setup)
    cluster {
      name: nexus-nats-cluster
      port: 6222
    }
    
    # Monitoring
    server_name: $POD_NAME
